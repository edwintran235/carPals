<!DOCTYPE html>
<html lang="en">

<!-- In order to use react, we need this as our index html!! -->
<!-- <!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vite + React + TS</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html> -->

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CarPals</title>

    <!-- Link to External CSS -->
    <link rel="stylesheet" href="./src/index.css" />

    <!-- Load Leaflet -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css"
    />
  </head>
  <body>
    <div class="navbar">
      <a href="profile">PROFILE</a>
      <div class="stats">
        <p>4.89 ★</p>
        <p>389 Tokens</p>
      </div>
    </div>
    
    <div id="map"></div>

    <div class="footer">
      <a href="https://github.com/megraves/carPals">GitHub</a>
      <p>made with ❤️ by carPals™️</p>
      <p>2025 ©️</p>
    </div>

    <!-- Load Leaflet JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        console.log("Leaflet loaded:", typeof L !== "undefined" ? "Yes" : "No");

        if (typeof L === "undefined") {
          console.error("Leaflet did not load correctly!");
          return;
        }

        var map = L.map("map").setView([42.3601, -71.0589], 13); // Default to Boston

        // Force OpenStreetMap tiles to load
        var tileLayer = L.tileLayer(
          "https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
          {
            attribution: "&copy; OpenStreetMap contributors",
            detectRetina: true, // Higher resolution tiles
            maxZoom: 18,
          }
        );

        tileLayer.addTo(map);
        console.log("Tile layer added:", tileLayer);

        // Try to get user's location
        if ("geolocation" in navigator) {
          navigator.geolocation.getCurrentPosition(
            function (position) {
              var userLocation = [
                position.coords.latitude,
                position.coords.longitude,
              ];
              map.setView(userLocation, 13);
              L.marker(userLocation)
                .addTo(map)
                .bindPopup("You are here")
                .openPopup();
              console.log("User location set:", userLocation);
            },
            function (error) {
              console.error("Geolocation error:", error);
              alert("Geolocation failed. Showing default location.");
            }
          );
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      });
    </script>
  </body>
</html>

